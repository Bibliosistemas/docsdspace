(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{279:function(s,e,t){"use strict";t.r(e);var a=t(13),n=Object(a.a)({},(function(){var s=this,e=s._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"cambios-necesarios-en-los-contenedores"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#cambios-necesarios-en-los-contenedores"}},[s._v("#")]),s._v(" Cambios necesarios en los contenedores")]),s._v(" "),e("p",[s._v("Para trabajar con proxy reverso es necesario hacer algunos cambios en los contenedores del api-rest y dspace-angular.")]),s._v(" "),e("p",[s._v("Configurar los siguientes archivos")]),s._v(" "),e("p",[s._v("docker/docker-compose.yml (en el arbol de dspace-angular)")]),s._v(" "),e("div",{staticClass:"language-yml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yml"}},[e("code",[s._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("environment")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("DSPACE_UI_SSL")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'true'")]),s._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("DSPACE_UI_HOST")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'cursodspace.bibliosistemas.com'")]),s._v("\n      "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#dspace-angular")]),s._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("DSPACE_UI_PORT")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'443'")]),s._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("DSPACE_UI_NAMESPACE")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" /\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("DSPACE_REST_SSL")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'true'")]),s._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("DSPACE_REST_HOST")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'cursodspace.bibliosistemas.com'")]),s._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("DSPACE_REST_PORT")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'443'")]),s._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("DSPACE_REST_NAMESPACE")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" /server\n")])])]),e("p",[s._v("docker/docker-compose-rest.yml")]),s._v(" "),e("div",{staticClass:"language-yml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yml"}},[e("code",[s._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Below syntax may look odd, but it is how to override dspace.cfg settings via env variables.")]),s._v("\n      "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# See https://github.com/DSpace/DSpace/blob/main/dspace/config/config-definition.xml")]),s._v("\n      "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# __P__ => "." (e.g. dspace__P__dir => dspace.dir)')]),s._v("\n      "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# __D__ => "-" (e.g. google__D__metadata => google-metadata)')]),s._v("\n      "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# dspace.dir, dspace.server.url, dspace.ui.url and dspace.name")]),s._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("dspace__P__dir")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" /dspace\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("dspace__P__server__P__url")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" https"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("//cursodspace.bibliosistemas.com/server\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("dspace__P__ui__P__url")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" https"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("//cursodspace.bibliosistemas.com\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("dspace__P__name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'DSpace Bibliosistemas'")]),s._v("\n      "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# db.url: Ensure we are using the 'dspacedb' image for our database")]),s._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("db__P__url")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'jdbc:postgresql://dspacedb:5432/dspace'")]),s._v("\n      "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# solr.server: Ensure we are using the 'dspacesolr' image for Solr")]),s._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("solr__P__server")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" http"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("//dspacesolr"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("8983/solr\n      "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# proxies.trusted.ipranges: This setting is required for a REST API running in Docker to trust requests")]),s._v("\n      "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# from the host machine. This IP range MUST correspond to the 'dspacenet' subnet defined above. NO IMPORTA PORQUE USAN EL MISMO DOMINIO ")]),s._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("proxies__P__trusted__P__ipranges")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'170.187.154.0'")]),s._v("\n")])])]),e("blockquote",[e("p",[s._v("De esta manera los contenedores quedan publicados con las variables de entorno que definen los dominios donde buscar la API-rest y donde publicarse.")])])])}),[],!1,null,null,null);e.default=n.exports}}]);